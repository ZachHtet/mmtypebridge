<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Burmese Font Converter</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        textarea { width: 300px; height: 100px; margin: 10px; }
        button { margin: 5px; }
        #error { color: red; display: none; }
        
        #zawgyi { 
            font-family: 'Zawgyi-One', sans-serif !important; 
            font-size: 16px; 
            line-height: 1.5; 
            direction: ltr; 
            unicode-bidi: embed;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        #win {
            font-family: 'Win Innwa', 'WinInnwa', 'Win', sans-serif !important;
            font-size: 16px;
            line-height: 1.5;
        }
    </style>
    <!-- Use local font files from your GitHub repository -->
    <style>
        @font-face {
            font-family: 'Zawgyi-One';
            src: url('./fonts/Zawgyi-One.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Win Innwa';
            src: url('./fonts/W49.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/rabbit-node@1.0.2/lib/rabbit.min.js"></script>
</head>
<body>
    <h1>Burmese Font Converter</h1>
    <div>
        <label>Unicode</label><br>
        <textarea id="unicode" placeholder="Enter Unicode text"></textarea>
    </div>
    <div>
        <label>Zawgyi (using Zawgyi-One font)</label><br>
        <textarea id="zawgyi" placeholder="Enter Zawgyi text"></textarea>
    </div>
    <div>
        <label>Win Innwa (English characters)</label><br>
        <textarea id="win" placeholder="Enter Win Innwa text (English characters)"></textarea>
    </div>
    <div id="error"></div>
    <div>
        <button onclick="clearAll()">Clear</button>
        <button onclick="copyText('unicode')">Copy Unicode</button>
        <button onclick="copyText('zawgyi')">Copy Zawgyi</button>
        <button onclick="copyText('win')">Copy Win</button>
    </div>

    <script>
        // Rest of your JavaScript code remains the same
        
        // Add this at the end of your window.onload function
        window.onload = function() {
            if (typeof Rabbit === 'undefined') {
                error({ name: 'LibraryError', message: 'Rabbit library failed to load. Check your internet connection.' });
            }
            
            // Force load fonts with absolute paths to your GitHub repository
            const zawgyiStyle = document.createElement('style');
            zawgyiStyle.textContent = `
                @font-face {
                    font-family: 'Zawgyi-One';
                    src: url('https://zachhtet.github.io/mmtypebridge/fonts/Zawgyi-One.ttf') format('truetype');
                    font-weight: normal;
                    font-style: normal;
                }
            `;
            document.head.appendChild(zawgyiStyle);
            
            const winStyle = document.createElement('style');
            winStyle.textContent = `
                @font-face {
                    font-family: 'Win Innwa';
                    src: url('https://zachhtet.github.io/mmtypebridge/fonts/W49.ttf') format('truetype');
                    font-weight: normal;
                    font-style: normal;
                }
            `;
            document.head.appendChild(winStyle);
            
            // Create preloaders for fonts
            const preloadZawgyi = document.createElement('div');
            preloadZawgyi.style.fontFamily = 'Zawgyi-One';
            preloadZawgyi.style.visibility = 'hidden';
            preloadZawgyi.style.position = 'absolute';
            preloadZawgyi.textContent = 'ေတြ မတက္ေအာင္ျပင္ဆင္ၿပီးၿပီလား?';
            document.body.appendChild(preloadZawgyi);
            
            const preloadWin = document.createElement('div');
            preloadWin.style.fontFamily = 'Win Innwa';
            preloadWin.style.visibility = 'hidden';
            preloadWin.style.position = 'absolute';
            preloadWin.textContent = 'awG rwufatmifjyifqifNyD;NyDvm;?';
            document.body.appendChild(preloadWin);
            
            // Add a simple fallback for Win Innwa font
            setTimeout(() => {
                try {
                    const winTextarea = document.getElementById('win');
                    const computedStyle = window.getComputedStyle(winTextarea);
                    console.log("Current Win font:", computedStyle.fontFamily);
                    
                    // Try to force the font to load again
                    const forceFontStyle = document.createElement('style');
                    forceFontStyle.textContent = `
                        #win {
                            font-family: 'Win Innwa', 'WinInnwa', 'Win', sans-serif !important;
                        }
                    `;
                    document.head.appendChild(forceFontStyle);
                } catch (e) {
                    console.error("Font check error:", e);
                }
            }, 1000);
        };
    </script>
</body>
</html> 
